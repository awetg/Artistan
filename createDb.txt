CREATE TABLE user (
user_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, 
fullname VARCHAR(100),
email VARCHAR(100), 
username VARCHAR(100),
password VARCHAR(255)
)

CREATE TABLE media (
media_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, 
filename TEXT,
path TEXT,
mimetype VARCHAR(100),
encoding VARCHAR(100),
time_created TIMESTAMP NOT NULL DEFAULT CURRENT_TIMESTAMP,
owner SMALLINT UNSIGNED NOT NULL,
CONSTRAINT `fk_user_id` FOREIGN KEY (owner) REFERENCES user (user_id) ON DELETE NO ACTION ON UPDATE NO ACTION
)

CREATE TABLE category (
category_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, 
name TEXT
)

CREATE TABLE comment (
comment_id SMALLINT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, 
content TEXT,
time_creatd TIMESTAMP,
owner SMALLINT UNSIGNED NOT NULL,
CONSTRAINT `fk_commenter_id` FOREIGN KEY (owner) REFERENCES user (user_id) ON DELETE CASCADE ON UPDATE CASCADE
)



CREATE TABLE post(
title TEXT,
media SMALLINT UNSIGNED NOT NULL,
comment SMALLINT UNSIGNED NOT NULL,
likes SMALLINT UNSIGNED NOT NULL,
owner SMALLINT UNSIGNED NOT NULL,
category SMALLINT UNSIGNED NOT NULL,
CONSTRAINT `fk_file_id` FOREIGN KEY (media) REFERENCES media (media_id) ON DELETE CASCADE ON UPDATE RESTRICT,
CONSTRAINT `fk_comment_id` FOREIGN KEY (comment) REFERENCES comment (comment_id) ON DELETE CASCADE ON UPDATE RESTRICT,
CONSTRAINT `fk_liker_id` FOREIGN KEY (likes) REFERENCES user (user_id) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT `fk_poster_id` FOREIGN KEY (owner) REFERENCES user (user_id) ON DELETE CASCADE ON UPDATE CASCADE
)




CREATE TABLE follower(
follower_id SMALLINT UNSIGNED NOT NULL,
followed_id SMALLINT UNSIGNED NOT NULL,
CONSTRAINT `fk_follower_id` FOREIGN KEY (follower_id) REFERENCES user (user_id) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT `fk_followed_id` FOREIGN KEY (followed_id) REFERENCES user (user_id) ON DELETE RESTRICT ON UPDATE CASCADE
)

CREATE TABLE user_intersts (
user_id SMALLINT UNSIGNED NOT NULL,
category_id SMALLINT UNSIGNED NOT NULL,
CONSTRAINT `fk_iuser_id` FOREIGN KEY (user_id) REFERENCES user (user_id) ON DELETE CASCADE ON UPDATE CASCADE,
CONSTRAINT `fk_category_id` FOREIGN KEY (category_id) REFERENCES category (category_id) ON DELETE CASCADE ON UPDATE CASCADE
)